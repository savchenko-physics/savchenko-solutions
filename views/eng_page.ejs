<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <!-- Bootstrap CSS & Google Fonts -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap"
    rel="stylesheet"
  />
  
  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/main_page.css" />

  <title><%= __('title') %></title>
</head>

<body>
  <!-- ============================
       HERO / NAVIGATION SECTION
  ============================ -->
  <header class="hero-section text-white">
    <nav class="navbar navbar-expand-lg navbar-dark">
      <div class="container-fluid px-4">
        <!-- Logo + Title -->
        <a class="navbar-brand d-flex align-items-center me-auto" href="/<%= lang %>/">
          <img 
            src="/img/book.png" 
            alt="<%= __('title') %> Logo" 
            class="logo-img me-2"
          />
          <div>
            <h1 class="site-title mb-0"><%= __('title') %></h1>
            <p class="site-motto mb-0"><%= __('motto') %></p>
          </div>
        </a>

        <!-- Toggle button for mobile -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarSupportedContent"
          aria-controls="navbarSupportedContent"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Right side items: language + user -->
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav ms-auto align-items-center">
            <li class="nav-item px-2 language-switch">
              <% if (lang === 'en') { %>
                <a href="/ru" class="nav-link text-white fw-bold">EN</a>
              <% } else { %>
                <a href="/en" class="nav-link text-white fw-bold">RU</a>
              <% } %>
            </li>
            <li class="nav-item px-2">
              <% if (username) { %>
                <a href="/user/<%= username %>" class="d-flex align-items-center">
                  <img
                    src="<%= profilePicture || '/img/profile_images/Default_placeholder.svg' %>"
                    alt="Profile Picture"
                    class="rounded-circle"
                    width="40"
                    height="40"
                  />
                </a>
              <% } else { %>
                <a
                  href="/<%= lang %>/login"
                  class="btn btn-outline-light rounded-pill"
                >
                  <%= __('menu.login') %>
                </a>
              <% } %>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- Search Bar + Hero Text -->
    <div class="container hero-content d-flex flex-column align-items-center justify-content-center text-center">
      <h2 class="hero-subtitle mb-4"><%= __('subtitle') %></h2>
      <div class="searchbar-wrapper mb-5">
        <input
          type="text"
          id="searchInput"
          class="form-control form-control-lg searchbar-input"
          placeholder="<%= __('menu.searchPlaceholder') %>"
        />
        <div
          id="searchResults"
          class="search-results position-absolute bg-white border rounded shadow-sm"
          style="display: none; z-index: 1000; width: 100%;"
        >
          <ul class="list-unstyled mb-0"></ul>
        </div>
      </div>
      <p class="hero-tagline">
        A global, student-led platform for exploring 2,023 challenging physics problems.
      </p>
    </div>
  </header>

  <!-- ============================
       MAIN CONTENT
  ============================ -->
  <main class="container my-5">
    <!-- Intro Row: Left = Text, Right = YouTube Preview -->
    <div class="row align-items-center justify-content-center mb-5">
      <div class="col-lg-6 mb-4">
        <div class="content-card shadow-sm p-4">
          <p>
            For over 30 years, the Savchenko physics problem collection has
            challenged students across post-Soviet countriesâ€”yet no comprehensive
            solution manual existed, until now. <strong>Savchenko Solutions</strong>
            is the first global, student-led effort to compile and refine detailed
            explanations for all 2,023 problems. Surpassing 800 published
            solutions in multiple languages, our thriving platform welcomes learners
            worldwide to collaborate, share insights, and publish in rigorous
            peer review.
          </p>
          <p>
            What began as a modest "archive" for personal solutions soon evolved
            into a vibrant international community, drawing thousands of regular
            users. This unprecedented collective intelligence fosters an environment
            where students and teachers learn from one another, transforming how
            physics is studied and taught â€” embracing a spirit of open collaboration
            and proving that knowledge shared is knowledge multiplied.
          </p>
        </div>
      </div>
      <div class="col-lg-5 d-flex justify-content-center">
        <a href="https://www.youtube.com/watch?v=d-x7Lk-mfTs" target="_blank">
          <img
            src="/img/yt_preview.jpg"
            alt="Watch on YouTube"
            class="img-fluid rounded-3 shadow-sm"
            style="max-width: 100%;"
          />
        </a>
      </div>
    </div>

    <!-- Team & Acknowledgments -->
    <div class="row align-items-start justify-content-center mb-5">
      <div class="col-lg-3 d-none d-lg-block">
        <img
          src="https://savchenkosolutions.com/img/team.png"
          alt="<%= __('description.coreTeam') %>"
          class="img-fluid rounded-3 shadow-sm"
        />
      </div>
      <div class="col-lg-9">
        <div class="content-card bg-light shadow-sm p-4">
          <h3 class="mb-3"><%= __('description.acknowledgments') %></h3>
          <p><%= __('description.deepestThanks') %></p>
          <h4><%= __('description.coreTeam') %></h4>
          <div class="core-team">
            <a href="/user/astrosander/">Aliaksandr Melnichenka <span class="fw-normal">(Founder)</span></a>
            <a href="/user/Luisito/">Luis Daniel FernÃ¡ndez Quintana</a>
            <a href="/user/stefan.nicov/">Stefan Nicov</a>
            <a href="/user/ar4senN/">Arsen Almashkan</a>
            <a href="/user/a.yersh/">Andrei Yersh</a>
            <a href="/user/jepkinsss/">Artem Levko</a>
            <a href="/user/diikann_/">Dzikan Mikita</a>
            <a href="/about#team">See all...</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Chapter & Sections + Sidebar with Top Authors & Contributions -->
    <div class="row">
      <div class="col-12 col-lg-8 mb-5">
        <!-- Chapters and Problems -->
        <% chapters.forEach((chapter, chapterIndex)=> {
            const hasContent = chapter.sections.some(section => 
                section.problems.some(column => column.length > 0)
            );
            if (hasContent) { %>
        <div class="chapter-block mb-4">
          <div class="d-flex align-items-center mb-3">
            <h4 class="chapter-title me-2 text-secondary">
              <%= __('chapter') %> <%= chapterIndex + 1 %>:
            </h4>
            <h4 class="chapter-name mb-0 me-2">
              <%= chapter.title %>
            </h4>
            <!-- Upload Button -->
            <a
              href="#"
              class="edit-button"
              data-chapter="<%= chapterIndex + 1 %>"
            >
              <span class="upload-text"><%= __('upload') %></span>
              <svg class="upload-icon" viewBox="0 0 24 24" width="16" height="16">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M17 8l-5-5-5 5M12 3v12"></path>
              </svg>
            </a>
          </div>
          <hr />
          <!-- Sections -->
          <% chapter.sections.forEach((section, sectionIndex) => {
               const hasProblems = section.problems.some(column => column.length > 0);
               if (hasProblems) { %>
          <div class="mb-4">
            <h5 class="section-title mb-2" id="<%= section.number %>">
              Â§ <%= section.number %> - <%= section.title %>
            </h5>
            <div class="problems-grid">
              <% const allProblems = section.problems.flat(); 
                 allProblems.forEach((problem) => { %>
              <div class="problem-item">
                <a href="/<%= lang %>/<%= problem %>" class="problem-link">
                  <%= problem %>
                </a>
              </div>
              <% }); %>
            </div>
          </div>
          <% } }); %>
        </div>
        <% } }); %>
      </div>

      <!-- SIDEBAR: Top Authors + Recent Contributions -->
      <div class="col-12 col-lg-4">
        <!-- Top Authors -->
        <div class="sidebar-card shadow-sm mb-4">
          <h4 class="text-center py-3 mb-0 bg-white fw-bold">
            <%= __('description.topAuthors') %>
          </h4>
          <table class="table table-hover text-center mb-0">
            <thead>
              <tr>
                <th scope="col" style="width:10%; opacity:0.8;">#</th>
                <th scope="col" style="width:45%; opacity:0.8;">
                  <%= __('description.profile') %>
                </th>
                <th scope="col" style="width:45%; opacity:0.8;">
                  <%= __('description.contributions') %>
                </th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>ðŸ¥‡</td>
                <td><a href="/user/Luisito" class="text-dark">Luisito</a></td>
                <td>152</td>
              </tr>
              <tr>
                <td>ðŸ¥ˆ</td>
                <td><a href="/user/ar4senN" class="text-dark">ar4senN</a></td>
                <td>127</td>
              </tr>
              <tr>
                <td>ðŸ¥‰</td>
                <td><a href="/user/diikann_" class="text-dark">diikann_</a></td>
                <td>116</td>
              </tr>
              <tr>
                <td>4</td>
                <td><a href="/user/Ismail" class="text-dark">Ismail</a></td>
                <td>104</td>
              </tr>
              <tr>
                <td>5</td>
                <td><a href="/user/a.yersh" class="text-dark">a.yersh</a></td>
                <td>94</td>
              </tr>
              <tr>
                <td>6</td>
                <td><a href="/user/jepkinsss" class="text-dark">jepkinsss</a></td>
                <td>77</td>
              </tr>
              <tr>
                <td>7</td>
                <td><a href="/user/_chender_" class="text-dark">_chender_</a></td>
                <td>65</td>
              </tr>
              <tr>
                <td>8</td>
                <td><a href="/user/Sasha" class="text-dark">Sasha</a></td>
                <td>22</td>
              </tr>
              <tr>
                <td>9</td>
                <td><a href="/user/Artoghrul" class="text-dark">Artoghrul</a></td>
                <td>16</td>
              </tr>
              <tr>
                <td>10</td>
                <td><a href="/user/Nurbaqyt" class="text-dark">Nurbaqyt</a></td>
                <td>11</td>
              </tr>
            </tbody>
          </table>
        </div>

        <!-- Recent Contributions -->
        <div class="sidebar-card shadow-sm d-none d-lg-block">
          <h4 class="text-center py-3 mb-0 bg-white fw-bold">
            <%= __('description.contributions2') %>
          </h4>
          <div class="contribution-history timeline p-3">
            <% recentContributions.forEach(contribution => { %>
            <div class="timeline-item">
              <div class="timeline-content">
                <strong><%= contribution.version %></strong>
                <span class="text-muted ms-1">
                  <a
                    href="/<%= lang %>/contributions/<%= contribution.id %>"
                    class="text-primary text-decoration-none"
                  >
                    <%= lang === 'en' ? 'edited' : 'Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð°' %>
                  </a>
                  <span class="text-dark fw-bold">
                    <%= contribution.editor %>
                  </span>
                </span>
                <div class="small text-muted">
                  <%= contribution.timestamp %>
                </div>
              </div>
            </div>
            <% }); %>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ============================
       POP-UP & OVERLAY
  ============================ -->
  <div id="edit-popup">
    <h3><%= __('popup.title') %></h3>
    <input
      type="text"
      id="problem-name"
      placeholder="<%= __('popup.placeholder') %>"
    />
    <button id="submit-problem"><%= __('popup.submit') %></button>
    <button id="cancel-edit"><%= __('popup.cancel') %></button>
  </div>
  <div id="popup-overlay"></div>

  <!-- ============================
       FOOTER
  ============================ -->
  <footer class="bg-white py-4 mt-5 border-top">
    <div class="container text-center">
      <p class="mb-0">
        <small>Â© <strong>Savchenko Solutions</strong>, 2023-2025</small>
      </p>
      <p class="mb-0">
        <small>
          All rights belong to the authors.
          Commercial use of materials requires written permission.
          aliaksandr@melnichenka.com
        </small>
      </p>
    </div>
  </footer>

  <!-- Bootstrap JS + Dependencies -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script
    src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.3/dist/umd/popper.min.js"
  ></script>
  <script
    src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
  ></script>
</body>
</html>
